# 6. Use Kind (instead of K3d)

## stop k3d

```sh
k3d cluster list

NAME          SERVERS   AGENTS   LOADBALANCER
k3s-default   1/1       0/0      false

k3d cluster stop k3s-default
```

## install kind

```sh
getenforce # 꼭 0이 나와야한다.
0

# SELinux가 활성화 되어 있으면 kind가 동작하지 않는다.
# sed -i 's/^SELINUX=.*/SELINUX=disabled/g' /etc/selinux/config
# reboot

[ $(uname -m) = x86_64 ] && curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.27.0/kind-linux-amd64
chmod +x ./kind
sudo mv ./kind /usr/local/bin/kind

kind get clusters
```

## install cluster

```sh
cat > /tmp/kind-cluster-config.yaml <<EOF
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
- role: control-plane
- role: worker
networking:
  disableDefaultCNI: true
  podSubnet: 172.16.0.0/16
EOF

kind create cluster --name kind --config /tmp/kind-cluster-config.yaml

kind get clusters

docker exec -it kind-control-plane bash

```
